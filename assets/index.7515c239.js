import{D as x,a as g,j as b,r as f,c as N,u as w,R as T,b as C}from"./vendor.84db66cc.js";const v=function(){const u=document.createElement("link").relList;if(u&&u.supports&&u.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))o(e);new MutationObserver(e=>{for(const n of e)if(n.type==="childList")for(const r of n.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&o(r)}).observe(document,{childList:!0,subtree:!0});function c(e){const n={};return e.integrity&&(n.integrity=e.integrity),e.referrerpolicy&&(n.referrerPolicy=e.referrerpolicy),e.crossorigin==="use-credentials"?n.credentials="include":e.crossorigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function o(e){if(e.ep)return;e.ep=!0;const n=c(e);fetch(e.href,n)}};v();function k(a){const u=/^(F[-A-Z0-9]{15}) (\d+) \?\? (.+)$/,c=a.match(u);if(c){const n=c[1],r=c[2],t=c[3];return{serialNumber:n,careTicketNumber:r,company:t}}const o=/^\d{2}. (F[-A-Z0-9]{15}) (\d+) ([_A-Z]+) -+ (.+)$/,e=a.match(o);if(e){const n=e[1],r=e[2],t=e[3],l=e[4];return{serialNumber:n,careTicketNumber:r,country:t,summary:l}}}const R=function(a){var u=x.now().setZone("America/Vancouver").minus(g.fromObject({weeks:1}));let c=u.year,o=u.weekNumber,e=[];a=a.trim();const n=a.match(/^Y([0-9]{2})WK([0-9]{2})/);n&&(c=2e3+parseInt(n[1]),o=parseInt(n[2]),a.slice(a.indexOf(`
`)+1));const r=/^(\s*[A-Z]{3}\s*)$/m;let t=a.split(r);for(let l=0;l<t.length;l++){let i=t[l];if(i.match(r)&&(i=i.trim(),l+1<t.length)){l+=1;let d=t[l].trim();e.push({name:i,units:d.split(`
`).map(k).filter(y=>y!==void 0)})}}return{year:c,week:o,models:e}},s=b.exports.jsx,m=b.exports.jsxs;function h({className:a,text:u,i_unit:c,i_model:o,attribute:e,onChange:n}){const[r,t]=f.exports.useState(u);return s("td",{className:a,children:s("input",{className:"w-full opacity-80",type:"text",value:r,onChange:l=>{t(l.target.value)},onBlur:()=>{r&&n(o,c,e,r)}})})}const $="aHR0cHM6Ly9mb3J0aWNhcmUuZm9ydGluZXQuY29tL0N1c3RvbWVyU3VwcG9ydC9kZWZhdWx0LmFzcHg/VElEPQ==";function I({data:a,onChange:u}){if(!a)return s("div",{children:"Invalid Data"});const c=(e,n,r,t)=>{u(e,n,r,t.trim().replaceAll(" ","_"))},o=e=>()=>{window.open(`${atob($)}${e}`)};return m("div",{className:"h-full w-full",children:[m("h1",{className:"font-mono text-sm font-bold py-3",children:["Year: ",a.year,"  Week: ",a.week]}),m("table",{className:"text-sm font-mono w-full",children:[s("thead",{className:"font-bold",children:m("tr",{children:[s("td",{children:"Serial Number"}),s("td",{children:"Ticket"}),s("td",{children:"Country"}),s("td",{children:"Summary"}),s("td",{children:"Company"})]})}),s("tbody",{children:a.models.flatMap((e,n)=>e.units.map((r,t)=>m("tr",{className:"hover:bg-slate-200",children:[s("td",{className:"select-all w-[12em]",children:r.serialNumber}),s("td",{className:"select-all w-[6em]",onClick:o(r.careTicketNumber),children:r.careTicketNumber}),s(h,{className:"select-all w-[12em] pr-2",i_model:n,i_unit:t,attribute:"country",onChange:c,text:r.country}),s(h,{className:"w-[35em] pr-2",i_model:n,i_unit:t,attribute:"summary",onChange:u,text:r.summary}),s("td",{children:r.company})]},`${n} ${t}`)))})]})]})}function M(a){const u=f.exports.useRef(null);return f.exports.useEffect(()=>{if(!u.current)return;const c=u.current;c.textContent="",a.onChange(c.textContent)},[]),s("textarea",{ref:u,className:"border p-2 w-full h-full font-mono text-xs",onChange:c=>{let o=c;a.onChange(o.target.value)}})}const p=a=>a.toString().padStart(2,"0");function S({data:a}){if(!a)return s("div",{children:"Invalid Data"});const{year:u,week:c,models:o}=a,e=o.flatMap(r=>r.units.length).reduce((r,t)=>r+t),n=o.flatMap(r=>r.units.map(t=>{var l,i;return(i=(l=t.country)==null?void 0:l.length)!=null?i:0})).reduce((r,t)=>Math.max(r,t));return console.log({year:u,week:c,nUnit:e,maxCountryLength:n}),m("pre",{children:["Y",p(u%100),"WK",p(c)," - ",e," units",s("br",{}),o.map(r=>`
`+r.name+`
`+r.units.map((t,l)=>{var i,d;return`${p(l+1)}. ${t.serialNumber} ${t.careTicketNumber} ${t.country} ${"-".repeat(n+1-((d=(i=t.country)==null?void 0:i.length)!=null?d:0))} ${t.summary}
`}).reduce((t,l)=>t+l,""))]})}function L(){const[a,u]=f.exports.useState("table"),c=(t,l)=>s("li",{className:N("p-1 w-40 text-center  rounded-lg shadow-md",{"text-white bg-slate-600":a===t,"text-black border ":a!==t}),onClick:()=>{u(t)},children:l}),[o,e]=f.exports.useState(),n=t=>{let l=R(t);l&&e(l)},r=(t,l,i,d)=>{!o||e(w(o,{models:{[t]:{units:{[l]:{[i]:{$set:d}}}}}}))};return s("div",{className:"h-screen",children:m("div",{className:"flex flex-col p-2 h-full",children:[m("ul",{className:"flex text-lg w-full h-30 space-x-2 mb-2 select-none",children:[c("input","Input"),c("table","Table"),c("output","Output")]}),s("div",{className:"flex-1",children:a==="input"?s(M,{data:o,onChange:n}):a==="table"?s(I,{data:o,onChange:r}):a==="output"?s(S,{data:o}):"not a valid tab"})]})})}T.render(s(C.StrictMode,{children:s(L,{})}),document.getElementById("root"));
